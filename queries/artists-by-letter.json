{
  "aggs": {
    "artist": {
      "terms": {"script": "a = doc['artist.raw'].value.toLowerCase(); a ? a[0] : '_'", "size": 30, "order": { "_term": "asc" }},
      "aggs": {
        "byName": {"terms": {"field": "artist.raw", "size": 5000, "order": { "_term": "asc" }}}
      }
    }
  }
}
